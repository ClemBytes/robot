<!DOCTYPE html>
<html>
<head>
    <title>Just a robot</title>
    <link rel="icon" href="data:image/png;base64,%s">
    <link rel="stylesheet" href="/data/template.css">
</head>
<body>
    <h1>Welcome to my robot page!</h1>
    <p>Current coordinates: (%d, %d)</p>
    <table id="button-grid">
        <tbody>
            <tr>
                <td></td>
                <td><form action="/up" method="post">
                        <button type="submit" id="up">UP</button>
                    </form>
                </td>
                <td></td>
            </tr>
            <tr>
                <td><form action="/left" method="post">
                        <button type="submit" id="left">LEFT</button>
                    </form>
                </td>
                <td><form action="/reset" method="post">
                        <button type="submit" id="reset">RESET</button>
                    </form>
                </td>
                <td>
                    <form action="/right" method="post">
                        <button type="submit" id="right">RIGHT</button>
                    </form>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <form action="/down" method="post">
                        <button type="submit" id="down">DOWN</button>
                    </form>
                </td>
                <td></td>
            </tr>
        </tbody>
    </table>
    <p>Now you can also use the arrow keys (and backspace for reset)!<br>
       You can also click directly on a grid cell to teleport to it!</p>

    <table id="robot-grid">
        <tbody>
            %s
        </tbody>
    </table>

    <script>
        function onKeyDown(event) {
            if (event.key == "ArrowRight") {
                const button_right = document.getElementById("right");
                button_right.click();
                event.preventDefault();
            } else if (event.key == "ArrowLeft") {
                const button_left = document.getElementById("left");
                button_left.click();
                event.preventDefault();
            } else if (event.key == "ArrowUp") {
                const button_up = document.getElementById("up");
                button_up.click();
                event.preventDefault();
            } else if (event.key == "ArrowDown") {
                const button_down = document.getElementById("down");
                button_down.click();
                event.preventDefault();
            } else if (event.key == "Backspace") {
                const button_reset = document.getElementById("reset");
                button_reset.click();
                event.preventDefault();
            } else {
                console.log(event);
            }
        }
        document.addEventListener("keydown", onKeyDown);

        function onClick(event) {
            if (event.target.localName == "td") {
                const x = event.target.dataset.x;
                const y = event.target.dataset.y;
                document.location = "/coords/" + x + "/" + y;
            }
        }
        const robot_grid = document.getElementById("robot-grid");
        robot_grid.addEventListener("click", onClick);
    </script>
</body>
</html>